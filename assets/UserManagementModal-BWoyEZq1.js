import{r as e,j as s,f as t,X as r,s as a,z as l,a0 as i,A as c,y as d}from"./vendor-CjuAVZ7F.js";import{u as n,g as o,r as x}from"./index-DN0dzhwU.js";import{m}from"./ui-CiILanuQ.js";import"./firebase-DuvuO4R-.js";const g=({list:g,onClose:h,onListUpdate:b})=>{const[v,j]=e.useState(!1),[N,f]=e.useState(null),{success:u,error:p,info:y}=n(),w=o(),k=g.creatorId===w||g.deviceUID===w,D=g.sharedWith||[],I=D.length+1,G=e=>e?`${e.substring(0,8)}...`:"Onbekend",A=e=>{if(!e)return"Onbekend";const s=new Date-(e.toDate?e.toDate():new Date(e)),t=Math.floor(s/864e5);return 0===t?"Vandaag":1===t?"Gisteren":t<7?`${t} dagen geleden`:t<30?`${Math.floor(t/7)} weken geleden`:`${Math.floor(t/30)} maanden geleden`};return s.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-start lg:pt-[88px] justify-center p-4 z-50",onClick:h,children:s.jsxs(m.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-[rgb(var(--card-bg))] rounded-2xl shadow-xl w-full max-w-md max-h-[calc(100vh-88px)] flex flex-col mt-0",onClick:e=>e.stopPropagation(),style:{overflow:"hidden"},children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[rgb(var(--border-color))]/50",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(t,{className:"w-6 h-6 text-primary"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-[rgb(var(--card-text))]",children:"Gebruikersbeheer"}),s.jsx("p",{className:"text-sm text-[rgb(var(--text-color))]/60",children:g.name})]})]}),s.jsx("button",{onClick:h,className:"p-2 rounded-lg hover:bg-[rgb(var(--border-color))]/20 transition-colors",children:s.jsx(r,{className:"w-5 h-5 text-[rgb(var(--text-color))]/60"})})]}),s.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[s.jsxs("div",{className:"bg-[rgb(var(--border-color))]/10 rounded-lg p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-primary",children:I}),s.jsx("div",{className:"text-sm text-[rgb(var(--text-color))]/60",children:"Totaal gebruikers"})]}),s.jsxs("div",{className:"bg-[rgb(var(--border-color))]/10 rounded-lg p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-secondary",children:D.length}),s.jsx("div",{className:"text-sm text-[rgb(var(--text-color))]/60",children:"Gedeeld met"})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-[rgb(var(--card-text))] mb-3 flex items-center",children:[s.jsx(a,{className:"w-5 h-5 mr-2 text-primary"}),"Eigenaar"]}),s.jsx("div",{className:"bg-primary/10 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-primary/20 rounded-full flex items-center justify-center",children:s.jsx(a,{className:"w-5 h-5 text-primary"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-[rgb(var(--card-text))]",children:w===(g.creatorId||g.deviceUID)?"Jij":"Andere gebruiker"}),s.jsxs("div",{className:"text-sm text-[rgb(var(--text-color))]/60",children:["ID: ",G(g.creatorId||g.deviceUID)]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm font-medium text-primary",children:"Volledige toegang"}),s.jsxs("div",{className:"text-xs text-[rgb(var(--text-color))]/60",children:["Sinds ",A(g.createdAt)]})]})]})})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-[rgb(var(--card-text))] mb-3 flex items-center",children:[s.jsx(t,{className:"w-5 h-5 mr-2 text-secondary"}),"Gedeelde gebruikers (",D.length,")"]}),0===D.length?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(l,{className:"w-12 h-12 text-[rgb(var(--text-color))]/40 mx-auto mb-3"}),s.jsx("p",{className:"text-[rgb(var(--text-color))]/60 mb-2",children:"Deze lijst is nog niet gedeeld"}),s.jsx("p",{className:"text-sm text-[rgb(var(--text-color))]/40",children:"Gebruik de deel-functie om anderen toegang te geven"})]}):s.jsx("div",{className:"space-y-3",children:D.map((e,r)=>s.jsx("div",{className:"bg-[rgb(var(--border-color))]/10 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-secondary/20 rounded-full flex items-center justify-center",children:s.jsx(t,{className:"w-5 h-5 text-secondary"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium text-[rgb(var(--card-text))]",children:["Gebruiker ",r+1]}),s.jsxs("div",{className:"text-sm text-[rgb(var(--text-color))]/60",children:["ID: ",G(e)]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("div",{className:"text-right mr-3",children:[s.jsx("div",{className:"text-sm font-medium text-secondary",children:"Lees/schrijf toegang"}),s.jsx("div",{className:"text-xs text-[rgb(var(--text-color))]/60",children:"Toegevoegd via delen"})]}),k&&s.jsx("button",{onClick:()=>(async e=>{if(k)try{f(e),j(!0),await x(g.id,e);const s={...g,sharedWith:g.sharedWith.filter(s=>s!==e)};b&&b(s),u("Gebruikerstoegang ingetrokken! ðŸš«"),y("De gebruiker heeft geen toegang meer tot deze lijst")}catch(s){p("Er ging iets mis bij het intrekken van de toegang")}finally{j(!1),f(null)}else p("Alleen de eigenaar kan gebruikers verwijderen")})(e),disabled:v||N===e,className:"flex items-center justify-center w-10 h-10 bg-accent/20 hover:bg-accent/30 text-accent rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Toegang intrekken",children:N===e?s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-accent"}):s.jsx(i,{className:"w-4 h-4"})})]})]})},e))})]}),!k&&s.jsx("div",{className:"mt-6 bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(c,{className:"w-5 h-5 text-yellow-500 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-yellow-700 dark:text-yellow-400 mb-1",children:"Beperkte toegang"}),s.jsx("div",{className:"text-sm text-yellow-600 dark:text-yellow-300",children:"Alleen de eigenaar van de lijst kan gebruikers beheren en toegang intrekken."})]})]})})]}),s.jsx("div",{className:"border-t border-[rgb(var(--border-color))]/50 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-[rgb(var(--text-color))]/60",children:[s.jsx(d,{className:"w-4 h-4 inline mr-1"}),"Lijst aangemaakt ",A(g.createdAt)]}),s.jsx("button",{onClick:h,className:"px-4 py-2 bg-[rgb(var(--border-color))]/20 hover:bg-[rgb(var(--border-color))]/30 text-[rgb(var(--card-text))] rounded-lg transition-colors",children:"Sluiten"})]})})]})})};export{g as default};
