import{r as e,j as r,p as t,K as a,X as s,N as o,f as i,g as l,l as n,C as c,T as d}from"./vendor-CjuAVZ7F.js";import{u as m,d as x,e as b,f as g,h,g as v}from"./index-DN0dzhwU.js";import u from"./QRShareModal-XtGkqvR5.js";import p from"./UserManagementModal-BWoyEZq1.js";import{m as j}from"./ui-CiILanuQ.js";import"./firebase-DuvuO4R-.js";const f=(e=8)=>["Melk","Brood","Eieren","Bananen","Appels","Kip","Pasta","Kaas","Tomaten","Uien","Wortels","Yoghurt","Rijst","Olijfolie","Koffie","Thee"].slice(0,e),y=({list:y,onBack:N,onListUpdate:w})=>{const[k,C]=e.useState(y?.items||[]),[K,S]=e.useState(""),[D,M]=e.useState(null),[$,B]=e.useState(""),[L,T]=e.useState(!1),[E,I]=e.useState(!1),[z,U]=e.useState(!1),[R,A]=e.useState(y?.name||""),[F,G]=e.useState(!1),[P,Q]=e.useState(y?.name||""),{success:V,error:W,info:_}=m(),O=v(),Y=x(y,O);b(y),e.useEffect(()=>{if(!y?.id)return;const e=async()=>{try{const e=await g(y.id);e&&(C(e.items||[]),A(e.name),Q(e.name),w&&w(e))}catch(e){}};e();const r=setInterval(e,5e3);return()=>clearInterval(r)},[y?.id,w]);const q=async()=>{if(!K.trim()||!Y)return;const e=K.trim().toLowerCase();if(k.some(r=>r.name.toLowerCase().trim()===e))W(`"${K.trim()}" staat al in de lijst!`,2e3);else{T(!0);try{const e={id:`item_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:K.trim(),completed:!1,addedAt:new Date,addedBy:O},r=[...k,e];await h(y.id,{items:r});const t=await g(y.id);t&&C(t.items||[]),S(""),V(`"${e.name}" toegevoegd!`,2e3)}catch(r){W("Kon item niet toevoegen")}finally{T(!1)}}},H=async e=>{if(Y){T(!0);try{const r=k.map(r=>r.id===e?{...r,name:$.trim()}:r);await h(y.id,{items:r});const t=await g(y.id);t&&C(t.items||[]),M(null),B(""),V("Item bijgewerkt")}catch(r){W("Kon item niet bijwerken")}finally{T(!1)}}},J=async()=>{if(P.trim()&&Y){T(!0);try{await h(y.id,{name:P.trim()});const e=await g(y.id);e&&(A(e.name),Q(e.name)),G(!1),V("Lijstnaam bijgewerkt")}catch(e){W("Kon lijstnaam niet bijwerken")}finally{T(!1)}}},X=k.filter(e=>e.completed).length,Z=k.length>0?X/k.length*100:0;return y?r.jsxs("div",{className:"min-h-screen-safe bg-[rgb(var(--bg-color))] transition-colors duration-300",children:[r.jsx("header",{className:"fixed-top-safe bg-[rgb(var(--card-bg))] shadow-sm border-b border-[rgb(var(--border-color))]/20 header-safe-area",children:r.jsx("div",{className:"max-w-6xl mx-auto px-4 safe-area-x",children:r.jsxs("div",{className:"flex items-center justify-between h-16",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("button",{onClick:N,className:"flex items-center space-x-2 px-3 py-2 bg-[rgb(var(--border-color))]/20 rounded-lg hover:bg-[rgb(var(--border-color))]/30 transition-colors",children:[r.jsx(t,{className:"w-5 h-5"}),r.jsx("span",{children:"Terug naar overzicht"})]}),F?r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"text",value:P,onChange:e=>Q(e.target.value),onKeyDown:e=>"Enter"===e.key&&J(),className:"px-3 py-2 border border-[rgb(var(--border-color))]/50 rounded-lg bg-[rgb(var(--card-bg))] text-[rgb(var(--card-text))] focus:outline-none focus:ring-2 focus:ring-primary",autoFocus:!0}),r.jsx("button",{onClick:J,className:"p-2 text-[rgb(var(--success-color))] hover:bg-[rgb(var(--success-color))]/10 rounded-lg",disabled:L,children:r.jsx(a,{className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>{G(!1),Q(R)},className:"p-2 text-[rgb(var(--error-color))] hover:bg-[rgb(var(--error-color))]/10 rounded-lg",children:r.jsx(s,{className:"w-5 h-5"})})]}):r.jsxs("h1",{className:"text-xl font-bold text-[rgb(var(--card-text))] cursor-pointer hover:text-[rgb(var(--primary-color))] transition-colors",onClick:()=>Y&&G(!0),children:[R,Y&&r.jsx(o,{className:"w-4 h-4 inline ml-2 opacity-50"})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("span",{className:"text-sm text-[rgb(var(--text-color))]/60",children:[k.length," item",1!==k.length?"s":""]}),y.isCreator&&r.jsx("button",{onClick:()=>{U(!0),_("Beheer gebruikers die toegang hebben tot je lijst ðŸ‘¥")},className:"p-2 text-[rgb(var(--card-text))] hover:bg-[rgb(var(--border-color))]/20 rounded-lg transition-colors",title:"Gebruikers beheren",children:r.jsx(i,{className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>{I(!0),_("Deel de QR-code of link om je lijst te delen! ðŸ“¤")},className:"p-2 text-[rgb(var(--card-text))] hover:bg-[rgb(var(--border-color))]/20 rounded-lg transition-colors",title:"Delen",children:r.jsx(l,{className:"w-5 h-5"})})]})]})})}),r.jsxs("main",{className:"max-w-6xl mx-auto px-4 py-6 content-safe-area",style:{paddingTop:"calc(var(--header-height) + 1.5rem)"},children:[k.length>0&&r.jsxs(j.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-[rgb(var(--card-bg))] rounded-2xl shadow-lg border border-[rgb(var(--border-color))]/20 p-6 mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-[rgb(var(--card-text))]",children:"Voortgang"}),r.jsxs("span",{className:"text-sm text-[rgb(var(--text-color))]/60",children:[X," van ",k.length," voltooid"]})]}),r.jsx("div",{className:"progress-bar-container h-3",children:r.jsx("div",{className:"progress-bar-fill",style:{width:`${Math.max(0,Math.min(100,Z))}%`}})}),r.jsx("div",{className:"text-center mt-2",children:r.jsxs("span",{className:"text-lg font-bold text-[rgb(var(--card-text))]",children:[Math.round(Z),"%"]})})]}),Y&&r.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-[rgb(var(--card-bg))] rounded-2xl shadow-lg border border-[rgb(var(--border-color))]/20 p-6 mb-6",children:[r.jsx("h2",{className:"text-lg font-bold text-[rgb(var(--card-text))] mb-4",children:"Item toevoegen"}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("input",{type:"text",value:K,onChange:e=>S(e.target.value),onKeyDown:e=>"Enter"===e.key&&q(),placeholder:"Wat wil je toevoegen?",className:"flex-1 px-4 py-3 border-2 border-[rgb(var(--border-color))]/30 rounded-xl focus:outline-none focus:ring-2 focus:ring-[rgb(var(--primary-color))] focus:border-[rgb(var(--primary-color))]/50 bg-[rgb(var(--card-bg))] text-[rgb(var(--card-text))] placeholder:text-[rgb(var(--text-color))]/40"}),r.jsx("button",{onClick:q,disabled:!K.trim()||L,className:"px-6 py-3 bg-[rgb(var(--color-primary-button))] hover:opacity-90 text-white rounded-xl shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:shadow-lg transition-all duration-200",children:r.jsx(n,{className:"w-5 h-5"})})]}),(0===k.length||0===K.length)&&r.jsxs("div",{className:"mt-4",children:[r.jsx("p",{className:"text-sm text-[rgb(var(--text-color))]/60 mb-2",children:"Populaire items:"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:f().map((e,t)=>r.jsx("button",{onClick:()=>{S(e),q()},className:"px-3 py-1.5 bg-[rgb(var(--border-color))]/20 hover:bg-[rgb(var(--border-color))]/30 text-[rgb(var(--text-color))]/80 rounded-lg text-sm transition-colors",children:e},t))})]})]}),r.jsx("div",{className:"space-y-4",children:0===k.length?r.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-[rgb(var(--card-bg))] rounded-2xl shadow-lg border border-[rgb(var(--border-color))]/20 p-12 text-center",children:r.jsxs("div",{className:"max-w-md mx-auto",children:[r.jsx("div",{className:"w-16 h-16 bg-[rgb(var(--primary-color))]/20 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(c,{className:"w-8 h-8 text-[rgb(var(--primary-color))]"})}),r.jsx("h3",{className:"text-xl font-bold text-[rgb(var(--card-text))] mb-2",children:Y?"Begin met winkelen!":"Geen items in deze lijst"}),r.jsx("p",{className:"text-[rgb(var(--text-color))]/60",children:Y?"Voeg je eerste item toe om te beginnen met je boodschappenlijst.":"Deze lijst bevat nog geen items."})]})}):k.map((e,t)=>r.jsx(j.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},className:"bg-[rgb(var(--card-bg))] rounded-xl shadow-md border border-[rgb(var(--border-color))]/20 p-4 transition-all duration-200 "+(e.completed?"opacity-60":""),children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("button",{onClick:()=>(async e=>{if(!Y)return;if(k.find(r=>r.id===e)){T(!0);try{const r=k.map(r=>r.id===e?{...r,completed:!r.completed}:r);await h(y.id,{items:r});const t=await g(y.id);t&&C(t.items||[]);const a=r.find(r=>r.id===e);V(a.completed?`âœ… "${a.name}" voltooid`:`âª "${a.name}" ongedaan gemaakt`)}catch(r){W("Kon item niet bijwerken")}finally{T(!1)}}})(e.id),disabled:!Y||L,className:"w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all duration-200 "+(e.completed?"bg-[rgb(var(--success-color))] border-[rgb(var(--success-color))]":"border-[rgb(var(--border-color))] hover:border-[rgb(var(--primary-color))]"),children:e.completed&&r.jsx(c,{className:"w-4 h-4",style:{color:"white",filter:"drop-shadow(0 0 1px rgba(0,0,0,0.3))"}})}),D===e.id?r.jsxs("div",{className:"flex-1 flex items-center space-x-2",children:[r.jsx("input",{type:"text",value:$,onChange:e=>B(e.target.value),onKeyDown:r=>"Enter"===r.key&&H(e.id),className:"flex-1 px-2 py-1 border border-[rgb(var(--border-color))]/50 rounded bg-[rgb(var(--card-bg))] text-[rgb(var(--card-text))] focus:outline-none focus:ring-1 focus:ring-[rgb(var(--primary-color))]",autoFocus:!0}),r.jsx("button",{onClick:()=>H(e.id),className:"p-1 text-[rgb(var(--success-color))] hover:bg-[rgb(var(--success-color))]/10 rounded",disabled:L,children:r.jsx(a,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>{M(null),B("")},className:"p-1 text-[rgb(var(--error-color))] hover:bg-[rgb(var(--error-color))]/10 rounded",children:r.jsx(s,{className:"w-4 h-4"})})]}):r.jsxs("div",{className:"flex-1 flex items-center justify-between",children:[r.jsx("span",{className:"text-lg break-words "+(e.completed?"line-through text-[rgb(var(--text-color))]/50":"text-[rgb(var(--card-text))]"),children:e.name}),Y&&r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>{M(e.id),B(e.name)},className:"p-1 text-[rgb(var(--text-color))]/60 hover:text-[rgb(var(--primary-color))] transition-colors",children:r.jsx(o,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>(async e=>{if(!Y)return;const r=k.find(r=>r.id===e);if(r){T(!0);try{const t=k.filter(r=>r.id!==e);await h(y.id,{items:t});const a=await g(y.id);a&&C(a.items||[]),V(`"${r.name}" verwijderd`,2e3)}catch(t){W("Kon item niet verwijderen")}finally{T(!1)}}})(e.id),className:"p-1 text-[rgb(var(--text-color))]/60 hover:text-[rgb(var(--error-color))] transition-colors",disabled:L,children:r.jsx(d,{className:"w-4 h-4"})})]})]})]})},e.id))})]}),E&&r.jsx(u,{listId:y.id,list:y,onClose:()=>I(!1)}),z&&r.jsx(p,{list:y,onClose:()=>U(!1),onListUpdate:w})]}):r.jsx("div",{className:"min-h-screen-safe flex items-center justify-center bg-[rgb(var(--bg-color))]",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-xl font-bold text-[rgb(var(--card-text))] mb-2",children:"Lijst niet gevonden"}),r.jsx("button",{onClick:N,className:"px-4 py-2 bg-[rgb(var(--color-primary-button))] text-white rounded-lg hover:opacity-90",children:"Terug naar overzicht"})]})})};export{y as default};
